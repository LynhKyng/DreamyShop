<div
  class="container-variant"
  *ngFor="let option of productOptions; let i = index; trackBy: trackByFn"
>
  <div class="classify taxonomy-group">
    <div class="title-variant">Nhóm phân loại</div>
    <div class="option-list">
      <div class="input-container">
        <input
          type="text"
          class="input-content"
          placeholder="Ví dụ: Màu sắc, Size, ..."
          [(ngModel)]="option.key"
        />
      </div>
    </div>
  </div>
  <div class="classify product-classification">
    <div class="title-variant">Phân loại hàng</div>
    <div class="option-list">
      <div
        class="option-item"
        *ngFor="
          let variant of option.value;
          let j = index;
          trackBy: trackByFnNested
        "
      >
        <div class="input-container">
          <input
            type="text"
            class="input-content"
            placeholder="Ví dụ: Trắng, Đỏ ..."
            [(ngModel)]="option.value[j]"
            (blur)="onInputOptionValue(i, option.value[j], j)"
          />
        </div>
        <div class="icon-trash" (click)="onDeleteVariant(i, j)">
          <i class="pi pi-trash" style="font-size: 1rem; color: #708090"></i>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="container-variant" *ngIf="!addClassifyProduct">
  <div class="classify taxonomy-group">
    <div class="add-classify-product">
      <button
        class="button-add-classify-product"
        (click)="addClassifyProductVariant()"
      >
        <i class="pi pi-plus" style="font-size: 1rem; color: red"></i> Thêm nhóm
        phân loại
      </button>
    </div>
  </div>
</div>
<div class="container-variant-table" *ngIf="productOptions[0]?.key">
  <table>
    <ng-container>
      <tr>
        <ng-container *ngFor="let option of productOptions">
          <th *ngIf="option.key !== ''">{{ option.key }}</th>
        </ng-container>
        <th class="col-rest">Giá</th>
        <th class="col-rest">Số lượng</th>
        <th class="col-rest">SKU phân loại</th>
        <th class="col-rest-picture">Ảnh</th>
      </tr>

      <ng-container
        *ngFor="let optionOne of productOptions[0].value; let indexO = index"
      >
        <ng-container *ngIf="!productOptions[1]?.value">
          <tr *ngIf="!!optionOne">
            <td>{{ optionOne }}</td>
            <td><input type="text" class="input-content-variant" /></td>
            <td><input type="text" class="input-content-variant" /></td>
            <td><input type="text" class="input-content-variant" /></td>
            <td class="picture">
              <div class="image-container" *ngIf="!isVisibility[indexO]">
                <img
                  [src]="productVariants[0].thumbnail_picture[indexO + 1]"
                  height="50"
                  width="50"
                />
                <br />
                <input
                  type="file"
                  [id]="'upload-' + indexO"
                  (change)="onSelectFile($event, 0, indexO)"
                  hidden
                />
                <label
                  class="button-add-picture-variant image-button opacity-label"
                  [for]="'upload-' + indexO"
                >
                  <i class="pi pi-plus" style="font-size: 1rem; color: red"></i>
                </label>
              </div>
              <input
                type="file"
                [id]="'upload-' + indexO"
                (change)="onSelectFile($event, 0, indexO)"
                hidden
              />
              <label
                class="button-add-picture-variant"
                [for]="'upload-' + indexO"
                *ngIf="isVisibility[indexO]"
              >
                <i class="pi pi-plus" style="font-size: 1rem; color: red"></i>
              </label>
            </td>
          </tr>
        </ng-container>
        <ng-container *ngIf="productOptions[1]?.value">
          <ng-container
            *ngFor="let optionTwo of productOptions[1].value; let j = index"
          >
            <tr *ngIf="!!optionTwo && !!optionOne">
              <td
                *ngIf="j === 0"
                [attr.rowspan]="productOptions[1].value.length - 1"
              >
                {{ optionOne }}
              </td>
              <td>{{ optionTwo }}</td>
              <td><input type="text" class="input-content-variant" /></td>
              <td><input type="text" class="input-content-variant" /></td>
              <td><input type="text" class="input-content-variant" /></td>
              <td class="picture">
                <button class="button-add-picture-variant">
                  <i class="pi pi-plus" style="font-size: 1rem; color: red"></i>
                </button>
              </td>
            </tr>
          </ng-container>
        </ng-container>
      </ng-container>
    </ng-container>
  </table>
</div>
